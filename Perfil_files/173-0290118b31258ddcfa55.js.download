(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{X8JP:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return c}));var a=i("Vsv2"),n=i("pjml"),s=i("0JpG");const o="ultraUi.components.services.cloudDrive.rteCloudStorageIntegrationModal",c="RteCloudStorageIntegrationService";class r{constructor(e,t,i,a){this.$q=e,this.cloudDriveService=t,this.CloudDriveModel=i,this.bbLocalize=a}initialize(){return this.cloudDriveService.isCloudServiceAvailable().then((e=>this.isCloudServiceAvailable=e))}openFilePicker(e){const t=this.bbLocalize.getLocale(e);return this.cloudDriveService.cloudDriveStorage.openFilePicker(t,!0).then((e=>{if(e){const t=[];return e.forEach((i=>{const a=(e=>e.account+"|"+e.id)(i),n=this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(a).$fetch({accessToken:e[0].bearer_token.key}).$asPromise();t.push(n)})),this.$q.all(t).then((t=>t.map((t=>({id:t.id,cloudStorageIntegrationAccessToken:e[0].bearer_token.key,name:t.name,size:t.size,type:t.type,updatedTime:t.updatedTime,webLocation:t.webLocation})))))}return this.$q.reject()}))}getModalCallback(e){return()=>this.cloudDriveService.cloudDriveStorage?this.openFilePicker(e):this.cloudDriveService.initializeCloudDrive().then((()=>this.openFilePicker(e)))}}r.$inject=["$q",a.b,n.h.serviceName,s.serviceName],angular.module(o,[a.a]).service(c,r)},"c7N/":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return l}));var a=i("D57K"),n=i("Fvsw"),s=i("jhBu"),o=i("aHpC"),c=i("Sa5G");const r="ultra.components.services.unsafe-html",l="unsafe-html";let u=class{constructor(e,t){this.contextService=e,this.entitlementService=t}hasEditUnsafeHtmlPermission(e){return e?this.entitlementService.hasSystemEntitlement(c.w.Modify):this.entitlementService.hasCourseEntitlement(c.w.Modify)}isAlternateDomainConfigured(){return this.contextService.getSystemInfo().alternateDomainConfigured}canEditUnsafeHtml(e=!1){return this.hasEditUnsafeHtmlPermission(e).then((e=>e&&this.isAlternateDomainConfigured()))}};u=Object(a.a)([Object(a.c)(0,Object(o.b)(n.b)),Object(a.c)(1,Object(o.b)(s.b))],u);angular.module(r,[n.a,s.a]).service(l,u)},"dRT/":function(e,t,i){"use strict";i.r(t);var a=i("D57K"),n=i("26Ar"),s=i("9zo4"),o=i("Fvsw"),c=i("jhBu"),r=i("0JpG"),l=i("vhkR"),u=i("TnpK"),d=i("X8JP"),h=i("yC9S"),b=i("Q/M7"),m=i("5MwF"),p=i("Qbdf"),g=i("Sa5G"),v=i("aHpC"),f=i("c7N/");i.d(t,"moduleName",(function(){return S})),i.d(t,"controllerName",(function(){return j})),i.d(t,"componentName",(function(){return P})),i.d(t,"IpHome",(function(){return k})),i.d(t,"BaseIpController",(function(){return I})),i.d(t,"template",(function(){return C}));const S="ultra.base.institution-page",j="ultra.base.institution-page.controller",P="institutionPageHome",O=angular.module(S,[o.a,u.b,d.a,f.a]);let k=class{constructor(e,t,i,a,n,s,o,c,r,l,u,d){this.$element=e,this.$scope=t,this.$stateParams=i,this.$q=a,this.accessibility=n,this.bbContext=s,this.entitlement=o,this.localize=c,this.ltiService=r,this.ultraState=l,this.contextCourse=u,this.unsafeHtml=d,this.featureFlags={},this.canEditUnsafeHtml=!1,this.selectPage=e=>{this.ultraState.go("base.institution-page-admin",{variantId:e})},this.openSmallPeek=e=>{this.ultraState.goPeekState("allLinks",{moduleId:e})},this.openEditPeek=(e,t=!1)=>{t?this.ultraState.goPeekState("editModule",{moduleId:e,expandRoles:t}):this.ultraState.goPeekState("editModule",{moduleId:e})},this.openCreatePeek=(e,t)=>{this.ultraState.goPeekState("createModule",{type:e,sequence:t})},this.openModifyPageImage=e=>{this.ultraState.goPeekState("editPageImage",{type:e})},this.openSettingsPeek=(e="default")=>this.ultraState.goPeekState("brand-detail",{brandId:e})}$postLink(){const e={insertYoutubeVideo:{apiBasePath:Object(b.c)(m.a.apiBasePath),babelfishInstance:this.localize.intl,babelfishFormatInstance:this.localize.frmt,courseId:this.contextCourse.courseId,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),locale:this.localize.getLocale(this.$scope),xsrfToken:this.bbContext.xsrfToken},contentMarket:{}},t={openEditPageImage:this.openModifyPageImage,openAll:this.openSmallPeek,openEdit:this.openEditPeek,openCreate:this.openCreatePeek,setFocusOverride:this.accessibility.setFocusOverrideOnPanel.bind(this.accessibility),openSettings:null,selectPage:this.selectPage,featureFlags:this.featureFlags,editorPluginsConfig:e};let i;if(this.ultraState.is("base.institution-page-admin")){const e=this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:"base.institutionPage.defaultVariantName"});i=this.$q.all([this.entitlement.hasSystemEntitlement(g.t.ViewBrand),this.$q.resolve(n.default.pageService.getCustomPages("IP",!0).then((t=>t.map((t=>({...t,variantName:t.variantName||e})))))),this.unsafeHtml.canEditUnsafeHtml(!0)]).then((([e,i,a])=>({...t,canEditUnsafeHTML:a,openSettings:e?this.openSettingsPeek:null,variantId:this.$stateParams.variantId,variantOptions:i,mode:"admin"})))}else i=this.unsafeHtml.canEditUnsafeHtml(!0).then((e=>({...t,variantId:this.variantId,canEditUnsafeHTML:e})));i.then((e=>{n.default.renderIp(this.$element[0],this.localize.isRTL(),this.localize.getAppLocale(),this.localize.intl,this.localize.frmt,e)}))}$onDestroy(){n.default.destroyReactControl(this.$element[0])}};k=Object(a.a)([Object(h.a)({module:O,componentName:P,bindings:{variantId:"<"}}),Object(a.c)(0,Object(v.b)("$element")),Object(a.c)(1,Object(v.b)("$scope")),Object(a.c)(2,Object(v.b)("$stateParams")),Object(a.c)(3,Object(v.b)("$q")),Object(a.c)(4,Object(v.b)(s.c)),Object(a.c)(5,Object(v.b)(o.b)),Object(a.c)(6,Object(v.b)(c.b)),Object(a.c)(7,Object(v.b)(r.serviceName)),Object(a.c)(8,Object(v.b)(l.b)),Object(a.c)(9,Object(v.b)(u.d)),Object(a.c)(10,Object(v.b)(p.e)),Object(a.c)(11,Object(v.b)(f.b))],k);let I=class{constructor(e,t){e.variantId=t}};I=Object(a.a)([Object(a.c)(0,Object(v.b)("$scope")),Object(a.c)(1,Object(v.b)("ipVariantId"))],I);const C='<div class="institution-page-container">\n  <bb-base-header page-title-key="base.nav.institutionPage" header-not-skip-target="true"></bb-base-header>\n  <institution-page-home variant-id="variantId"></institution-page-home>\n  <div ui-view></div>\n</div>';O.controller(j,I)}}]);